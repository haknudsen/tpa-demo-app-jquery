<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Talking Heads App - Settings</title>
<script src="//cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-with-addons.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-dom.js"></script>
<script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.2/lodash.js"></script>
<script src="//static.parastorage.com/services/js-sdk/1.72.0/js/wix.min.js"></script>
<script src="http://static.parastorage.com/services/editor-ui-lib/1.23.0/lib/editor-ui-lib-jquery.min.js"></script>
<link href="src/settings/css/settings.css" rel="stylesheet" type="text/css">
</head>
<body>
<div wix-ctrl="appSettings"></div>
<div id="panelTabs" wix-ctrl="panelTabs" wix-options="{defaultTabIndex:0}"> 
  
  <!--main tab-->
  
  <div tab="Main" class="main-tab"> <img class="app-logo" src="src/settings/svg/logo.svg" alt="app logo"/>
    <p class="app-description"> This is the Wix App settings demo.<br/>
      Please add a short description of your App + CTA for the main action. </p>
    <div class="main_button"
             wix-ctrl="Button"
             wix-options="{
                    label: 'Main CTA',
                    className: 'btn-confirm-primary'
                }"
             id="main-cta"
        ></div>
  </div>
  
  <!--settings tab-->
  
  <div tab="Plan">
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Choose your Plan'}"> </div>
    <hr class="divider-long"/>
  </div>
  
  <!--Actor tab-->
  
  <div tab="Actor">
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Choose your Actor'}"> </div>
    <hr class="divider-long"/>
    <div id="actor" class="actor"
             wix-ctrl="DropDown"
             wix-param="actor"
             wix-options=""
        ></div>
    <hr class="divider-long"/>
    <div id="actor-demo"> </div>
  </div>
  
  <!--Script tab-->
  
  <div tab="Script" style="margin-bottom: 20px">
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Choose Your Script'}"> </div>
    <hr class="divider-long"/>
    <div id="script" class="script"
             wix-ctrl="DropDown"
             wix-param="script"
             wix-options=""
        ></div>
    <hr class="divider-long"/>
    <div id="script-example"> </div>
  </div>
  
  <!--Player tab-->
  
  <div tab="Player" class="player-tab">
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Player Settings'}"> </div>
    <hr class="divider-long"/>
    <div id="autostart" class="player_type"
             wix-ctrl="DropDown"
             wix-param="autostart"
             wix-options="{
                title: 'Autostart',
                defaultValue: '0',
                        infoTitle: 'Autostart',
                        infoText: 'Does the video start automatically?',
                options: [
                    { value: '0', label: 'Yes'},
                    { value: '1', label: 'Image'},
                    { value: '2', label: 'Mute'}
                ]}"
        ></div>
    <hr class="divider-long"/>
    <div class="player_session_play"
             wix-ctrl="DropDown"
             wix-options="{
                    title: 'Play Every Time',
                    defaultValue: '1',
                        infoTitle: 'Play Every Time',
                        infoText: 'How often will video play on new visits',
                    options: [
                        { value: '1', label: 'Play Every Time'},
                        { value: '2', label: 'Once Per Session'},
                        { value: '3', label: 'Once Only'}
                    ]
                }"
        ></div>
    <hr class="divider-long"/>
    <div id="ToggleSwitch" class="player_exit"
             wix-ctrl="ToggleSwitch"
             wix-options="{
                        label: 'Exit on Complete',
                        defaultValue: false,
                        infoTitle: 'Exit on Complete',
                        infoText: 'Does the video stay on screen when finished'
                    }"
        ></div>
    <hr class="divider-long"/>
    <div class="player_delay"
             wix-ctrl="Slider"
             wix-options="{
                    title: 'Delay (secs)',
                    min: 0,
                    max: 2,
                    step: 0.1,
                    defaultValue: 0.5,
                        infoTitle: 'Delay',
                        infoText: 'Delay the start of the video'
                }"
        ></div>
    <div id="bar-color" wix-param="_btnBgColo"
             wix-ctrl="ColorPickerSlider"
             wix-options="{
                    title: 'Playerbar color',
                    startWithColor: 'color-3',
                    startWithOpacity: 0.42                  
                }"
        ></div>
  </div>
  
  <!--Support tab-->
  
  <div tab="Support" class="support-tab">
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Developer info'}"> </div>
    <hr class="divider-long"/>
    <ul class="developer-info">
      <li>
        <div wix-ctrl="Symbol" wix-options="{name: 'email'}"></div>
        support@websitetalkingheads.com </li>
      <li>
        <div wix-ctrl="Symbol" wix-options="{name: 'globe'}"></div>
        http://websitetalkingheads.com/Wix/ </li>
      <li>
        <div wix-ctrl="Symbol" wix-options="{name: 'phone'}"></div>
        1 801 748 2281 </li>
    </ul>
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Review the app'}"> </div>
    <hr class="divider-long"/>
    <p class="review-paragraph">Have you enjoyed the app? Spread the word and rate us in the app market</p>
    <div class="button-wrapper-center">
      <div class="support_rateUs"
                 wix-ctrl="Button"
                 wix-options="{
                        label: 'Rate Us',
                        className: 'btn-confirm-primary'
                    }"
            ></div>
    </div>
    <hr class="divider-long"/>
    <div wix-ctrl="SectionDividerLabeled"
             wix-options="{label: 'Send us a message'}"> </div>
    <hr class="divider-long"/>
    <div class="support_email"
             wix-ctrl="Input"
             wix-options="{
                    title: 'What\'s your email? (optional)',
                    placeholder: 'Email'
                }"
        ></div>
    <hr class="divider-short"/>
    <div class="support_message"
             wix-ctrl="Input"
             wix-options="{
                    title: 'What do you want to tell us?',
                    placeholder: 'Write us your message (new feature idea / other issues)',
                    isMultiLine: true
                }"
        ></div>
    <hr class="divider-short"/>
    <div class="button-wrapper-center">
      <div class="support_sendButton"
                 wix-ctrl="Button"
                 wix-options="{
                        label: 'Send'
                    }"
            ></div>
    </div>
  </div>
  <hr class="divider-short"/>
  <div wix-ctrl="Button"
         wix-options="{
                className: 'btn-upgrade-nav',
                label: 'Upgrade'
            }"
    ></div>
</div>
<script src="src/settings/settings.js"></script> 
<script src="src/js/talking_heads_demo.js"></script> 
<script> 
$.ajaxSetup({   
	async: false
});
$(document).ready(function() {
    //--------------------color picker
    $("#bar-color").getCtrl().onChange(function(val){
              console.log(val.color,"--",val.opacity);
});
	//--------------------------------Create actor list        
	var actorList = Array();
	$.getJSON("actors.json", function(result) {
		$.each(result, function(i, field) {
			var newActor = {
				value: i.toString(),
				label: field
			};
			actorList.push(newActor);
		});
	});
	var options = {
		title: 'Actor',
		defaultValue: '0',
		infoTitle: 'Actor',
		infoText: 'Choose Your Actor',
		options: actorList
	};
	$("#actor").getCtrl().render(options);
	//-------------------------------actor change
	$("#actor").getCtrl().onChange(function(value) {
		console.log("actor-", value, ' selected');
            changeActor(value);
	});
    //---------------------------script change
     $("#script").getCtrl().onChange(function(value){
        console.log(value, ' selected');
    });
    //----------------------Actor Demo
    var $appTabs = $("#panelTabs").getCtrl();
    $appTabs.onChange(function(value) {
        if(value===2){
            var value=$("#actor").getCtrl().getValue();
            changeActor(value);
        }
    });
    function changeActor(value){
        console.log("Change Actor-" + value);
            $('#actor-demo').empty();
        playerTH('#actor-demo',actorList[value].label);
    }	
    //--------------------------------Create script list        
	var scriptList = Array();
	$.getJSON("scripts.json", function(script) {
        console.log("this is the result-" + script);
		$.each(script, function(i, title) {
			var newActor = {
				value: i.toString(),
				label: title
			};
			scriptList.push(newActor);
		});
        console.log(scriptList);
	});
	var options = {
		title: 'Script',
		defaultValue: '0',
		infoTitle: 'Script',
		infoText: 'Choose Your Script',
		options:[
        {value: '1', label: 'main'},
        {value: '2', label: 'sub level 1', className: 'level1'},
        {value:'3', label: 'sub 2 level 1', className: 'level1'},
        {value:'4', label: 'sub level 2', className: 'level2'},
        {value:'5', label: 'main 2'}
	};
	$("#script").getCtrl().render(options);
});
</script>
</body>
</html>
